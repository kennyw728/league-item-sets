"use strict";angular.module("leagueItemSetsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/summoner/:summoner",{templateUrl:"views/summoner.html",controller:"SummonerCtrl",controllerAs:"summoner"}).when("/summoners",{templateUrl:"views/summoners.html",controller:"SummonersCtrl",controllerAs:"summoners"}).when("/champions/",{templateUrl:"views/champions.html",controller:"ChampionsCtrl",controllerAs:"champions"}).when("/champion/:id",{templateUrl:"views/champion.html",controller:"ChampionCtrl",controllerAs:"champion"}).otherwise({redirectTo:"/"})}]),angular.module("leagueItemSetsApp").service("RiotService",["$http","apiKey",function(a,b){var c="https://global.api.pvp.net/",d=b.GetKey(),e={Get:function(){return a.get(c+"api/lol/static-data/na/v1.2/champion?champData=image&"+d)},GetByID:function(b){return a.get(c+"api/lol/static-data/na/v1.2/champion/"+b+"?champData=all&"+d)}},f={GetByName:function(b){return a.get(c+"api/lol/na/v1.4/summoner/by-name/"+b+"?"+d)},GetByID:function(b){return a.get(c+"api/lol/na/v2.5/league/by-summoner/"+b+"/entry?"+d)}},g={Get:function(){return a.get(c+"api/lol/static-data/na/v1.2/item?"+d)}},h={GetBySummonerID:function(b){return a.get(c+"api/lol/na/v2.2/matchhistory/"+b+"?"+d)}},i={Get:function(){return a.get(c+"api/lol/na/v2.5/league/challenger?type=RANKED_SOLO_5x5&"+d)}};return{Champions:e,Summoner:f,Items:g,MatchHistory:h,Challengers:i}}]),angular.module("leagueItemSetsApp").filter("orderObjectBy",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){return a[b]>c[b]?1:-1}),c&&d.reverse(),d}}),angular.module("leagueItemSetsApp").service("Utilities",["$http","apiKey",function(a,b){var c=function(a){return a.toLowerCase().replace(/ /g,"")},d=function(a,b){var c={title:a,type:"custom",map:"any",mode:"any",priority:"false",sortrank:0,blocks:[]};return angular.forEach(b,function(a){var b={type:a.type,recMath:!1,minSummonerLevel:-1,maxSummonerLevel:-1,showIfSummonerSpell:"",hideIfSummonerSpell:"",items:[]};angular.forEach(a.items,function(a){b.items.push({id:a.id.toString(),count:1})}),c.blocks.push(b)}),c};return{CleanText:c,CreateItemSetJSON:d}}]),angular.module("leagueItemSetsApp").controller("ChampionsCtrl",["$scope","RiotService",function(a,b){b.Champions.Get().then(function(b){a.champions=b.data.data}),a.filter=function(b){angular.forEach(a.champions,function(a,c){a.hide=!0,c.toLowerCase().indexOf(b)>-1&&(a.hide=!1)})}}]),angular.module("leagueItemSetsApp").controller("ChampionCtrl",["$scope","$routeParams","$location","RiotService",function(a,b,c,d){d.Champions.GetByID(b.id).then(function(b){a.selectedChamp=b.data})}]),angular.module("leagueItemSetsApp").controller("HomeCtrl",["$scope","$location",function(a,b){a.goTo=function(a){b.path(a)}}]),angular.module("leagueItemSetsApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("leagueItemSetsApp").controller("SummonerCtrl",["$scope","$routeParams","$location","RiotService","Utilities",function(a,b,c,d,e){function f(b){d.Summoner.GetByID(b).then(function(c){c.data[b].length>0&&(a.summoner=c.data[b][0].entries[0],a.summoner.division=c.data[b][0].tier+" "+a.summoner.division,g(b))},function(){a.showErrorMessage=!0})}function g(b){d.MatchHistory.GetBySummonerID(b).then(function(b){a.matches=b.data.matches,angular.forEach(a.matches,function(b){angular.forEach(a.champions,function(a){b.participants[0].championId===a.id&&(b.participants[0].championDetail=a)});for(var c=[],d=0;7>d;d++){var e=b.participants[0].stats["item"+d];0!==e&&c.push(angular.copy(a.items[e]))}b.participants[0].items=c,b.participants[0].kda=b.participants[0].stats.kills+" / "+b.participants[0].stats.deaths+" / "+b.participants[0].stats.assists})})}d.Champions.Get().then(function(b){a.champions=b.data.data}),d.Items.Get().then(function(b){a.items=b.data.data}),void 0!==b.summoner&&(isNaN(b.summoner)?d.Summoner.GetByName(b.summoner).then(function(a){f(a.data[e.CleanText(b.summoner)].id)}):f(b.summoner)),a.searchSummoner=function(a){c.path("summoner/"+a)},a.openModal=function(a,b,c){$("#jsonModal").modal("show");var d="C:\\Riot Games\\League of Legends\\Config\\Champions\\"+c.key+"\\Recommended",f=[{type:"Block Title 1",items:a}],g=e.CreateItemSetJSON(b+"'s Build",f),h="text/json;charset=utf-8,"+encodeURIComponent(angular.toJson(g));$("#downloadButton").append('<a href="data:'+h+'" download="'+b+" "+c.key+'.json">Download JSON</a>'),$("#fileLocation").text(d),$("#modalLabel").text(b+"'s "+c.key)},a.close=function(){$("#jsonModal").modal("hide"),$("#downloadButton a").remove()}}]),angular.module("leagueItemSetsApp").controller("SummonersCtrl",["$scope","$routeParams","$location","RiotService","Utilities",function(a,b,c,d,e){d.Challengers.Get().then(function(b){a.challengers=b.data.entries,console.log(a.challengers)}),a.searchSummoner=function(a){c.path("summoner/"+a)}}]),angular.module("leagueItemSetsApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/champion.html",'<div class="row"> <div class="col-md-1"> <img class="champIcon" src="{{\'//ddragon.leagueoflegends.com/cdn/5.15.1/img/champion/\' + selectedChamp.image.full}}"> </div> <div> <span><h2>{{selectedChamp.name}}, {{selectedChamp.title}}</h2></span> </div> </div> <div> </div>'),a.put("views/champions.html",'<form class="form-inline" style="text-align: center"> <div class="form-group"> <label>Filter</label> <input type="text" class="form-control" placeholder="Champion Name" ng-model="filterChampion" ng-keyup="filter(filterChampion)"> </div> </form> <hr> <div class="row"> <div class="col-md-1" ng-repeat="(championName, championDetail) in champions | orderObjectBy:\'name\'" ng-hide="championDetail.hide"> <a ng-href="#/champion/{{championDetail.id}}"><img class="champIcon" src="{{\'//ddragon.leagueoflegends.com/cdn/5.15.1/img/champion/\' + championDetail.image.full}}"></a> <div class="champTitle ellipsis">{{championDetail.name}}</div> </div> </div>'),a.put("views/contact.html","<p>Created by Kenny Wong.</p>"),a.put("views/home.html",'<h2>Greetings Summoner</h2> <div style="margin: 25px"> Welcome to League Item Sets - a place where you can add item sets based on games in anyone\'s match history. </div> <div style="margin: 25px"> Click below if you want to search by a specific champion or by a specific player! </div> <div class="row"> <div class="col-lg-6" style="text-align: center"> <div class="well pointer wellHover" ng-click="goTo(\'champions\')"> <div class="wellText"> By Champions </div> <img src="../images/bychampions.897f85e5.jpg" style="width:100%"> </div> </div> <div class="col-lg-6" style="text-align: center"> <div class="well pointer wellHover" ng-click="goTo(\'summoners\')"> <div class="wellText"> By Summoners </div> <img src="../images/bysummoners.d90deafc.png" style="width:100%"> </div> </div> </div>'),a.put("views/summoner.html",'<form class="form-inline" style="text-align: center; margin-bottom: 25px" ng-submit="searchSummoner(newSummoner)"> <div class="form-group input-group"> <input type="text" class="form-control" style="width: 300px" placeholder="Enter a summoner" ng-model="newSummoner"> <span class="input-group-addon" ng-click="searchSummoner(newSummoner)">Go</span> </div> </form> <div style="text-align: center; margin: 150px 0" ng-show="showErrorMessage"> <h2>There is no summoner in NA with that name</h2> </div> <div ng-show="summoner.playerOrTeamName"> <hr> <div class="row" style="border: solid 1px; background-color: rgba(255, 255, 255, 0.04)"> <img class="headerIcon" src="https://avatar.leagueoflegends.com/na/{{summoner.playerOrTeamName}}.png"> <div class="headerText">{{summoner.playerOrTeamName}}</div> <div class="subheaderText">{{summoner.division}} - {{summoner.leaguePoints}}LP <span style="margin-left: 25px">Wins: {{summoner.wins}}</span></div> </div> <hr> </div> <div class="row"> <div class="col-sm-3" ng-repeat="match in matches| orderBy: \'-matchCreation\'" style="text-align: center"> <div class="well" ng-repeat="participant in match.participants"> <img class="champIcon" style="width: 75px; height: 75px" ng-src="{{\'//ddragon.leagueoflegends.com/cdn/5.15.1/img/champion/\' + participant.championDetail.image.full}}"> <h4 class="champTitle ellipsis">{{participant.kda}}</h4> <div class="row" style="margin-bottom: 15px"> <div class="col-xs-6 col-xs-offset-3"> <div class="row"> <div class="col-xs-3" style="padding: 2px" ng-repeat="item in participant.items"> <img style="width: 100%" ng-src="{{\'http://ddragon.leagueoflegends.com/cdn/5.15.1/img/item/\' + item.id + \'.png\'}}" title="{{item.name}}"> </div> </div> </div> </div> <button type="button" class="btn btn-primary" ng-click="openModal(participant.items, summoner.name, participant.championDetail)">Get Item Set</button> </div> </div> </div> <!-- Modal below --> <div class="modal fade" id="jsonModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false"> <div class="modal-dialog" role="document" style="margin-top: 200px"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title" id="modalLabel"></h4> </div> <div class="modal-body text-center"> <div> <label>Go this directory (or associating Riot Games Directory):</label> <div style="margin: 0 0 10px 25px"><samp id="fileLocation"></samp></div> <label>and save the below file into the above directory.</label> </div> <button class="btn btn-primary" id="downloadButton" style="margin: 15px"></button> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="close()">Close</button> </div> </div> </div> </div>'),a.put("views/summoners.html",'<form class="form-inline" style="text-align: center; margin-bottom: 25px" ng-submit="searchSummoner(newSummoner)"> <div class="form-group input-group"> <input type="text" class="form-control" style="width: 300px" placeholder="Enter a summoner" ng-model="newSummoner"> <span class="input-group-addon" ng-click="searchSummoner(newSummoner)">Go</span> </div> </form> <div style="text-align: center"> or search for challenger player below <hr> </div> <div class="row"> <div class="col-sm-3" ng-repeat="challenger in challengers| orderBy: \'-leaguePoints\'"> <div class="well wellHover pointer" style="text-align: center" ng-click="searchSummoner(challenger.playerOrTeamName)"> <img class="champIcon" style="width: 75px; height: 75px" src="https://avatar.leagueoflegends.com/na/{{challenger.playerOrTeamName}}.png"> <h4 class="champTitle ellipsis">{{challenger.playerOrTeamName}}</h4> <h5 class="champTitle ellipsis">{{challenger.leaguePoints}} LP <span style="margin-left: 15px">WINS: {{challenger.leaguePoints}}</span></h5> </div> </div> </div>')}]);